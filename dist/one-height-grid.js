define("one-height-grid",["backbone"],function(e){var t=e.View.extend({options:{rowSelector:".one-height-grid-row",cellSelector:".one-height-grid-cell",cellMargin:0,parentWidth:0,regenerateFlag:!1},initialize:function(){var e=this;this.options.cellMargin=$(this.el).data("margin"),$(this.el).data("resize")!="off"&&$(window).on("resize",function(){e.setGridSize()})},setGridSize:function(){var e=this,t=$(e.options.rowSelector).size(),n=1;this.options.parentWidth=$(this.el).width(),$(e.options.rowSelector).each(function(){if($(e.el).width()!=e.options.parentWidth&&e.options.regenerateFlag===!1)return e.options.regenerateFlag=!0,e.setGridSize(),!1;var r=$(this).find(e.options.cellSelector),i=new Array,s=new Array,o=new Array,u=1e5;$(r).each(function(){var e=parseInt($(this).data("width")),t=parseInt($(this).data("height"));t<u&&(u=t),i.push(e),s.push(t),o.push(e/t)});var a=0;for(var f=0;f<i.length;f++)i[f]=u*o[f],a+=i[f];o=(e.options.parentWidth-(i.length-1)*e.options.cellMargin)/a,u=Math.round(u*o),a=0;for(var f=0;f<i.length;f++)i[f]=Math.round(i[f]*o),a+=i[f],$(r).eq(f).css({height:u+"px",width:i[f]+"px",marginBottom:n==t?"0px":e.options.cellMargin+"px"}),f!=i.length-1?($(r).eq(f).css({marginRight:e.options.cellMargin+"px"}),a+=e.options.cellMargin):e.options.parentWidth<a&&(i[f]=i[f]-(a-e.options.parentWidth),$(r).eq(f).css({width:i[f]+"px"})),$(r).eq(f).trigger("render:finish");n+=1}),e.options.regenerateFlag=!1},render:function(){return this.setGridSize(),this}});return t});